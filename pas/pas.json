{
  "meta": {"version": "0.1.0", "start":"program"},
  "program": [
    "PROGRAM",
    "ID",
    "SEMI",
    "block",
    "DOT"
  ],
  "block": [
    "declarations",
    "compound_statement"
  ],
  "declarations" : [
    {"?": ["VAR", {"+": ["variable_declaration", "SEMI"]}]}, 
    {"*": ["procedure_declaration"] }
  ],
  "variable_declaration" : [
    "ID", 
    {"*": ["COMMA", "ID"]}, 
    "COLON", 
    "type_spec"
  ],
  "procedure_declaration" : [
    "PROCEDURE", 
    "ID", 
    {"?": ["LPAREN", "formal_parameter_list", "RPAREN"]}, 
    "SEMI", 
    "block", 
    "SEMI"
  ],
  "formal_parameter_list" : ["formal_parameters", {"*":["SEMI", "formal_parameters"]}],
  "formal_parameters" : [
    "ID", 
    {"*": ["COMMA", "ID"]}, 
    "COLON", 
    "type_spec"
  ],
  "type_spec" : {"|" : ["INTEGER", "REAL"]},
  "compound_statement" : [
    "BEGIN", 
    "statement_list", 
    "END"
  ],
  "statement_list" : ["statement", {"*": ["SEMI", "statement"]}],
  "statement" : {"|": ["compound_statement",
    "proccall_statement",
    "assignment_statement","for_loop"]},
  "proccall_statement" : [
    "ID", 
    "LPAREN", 
    "actual_parameter_list", 
    "RPAREN"
  ],
  "actual_parameter_list": {"?": ["expr", {"*": ["COMMA", "expr"]}]},
  "assignment_statement" : [
    "varleft", 
    "ASSIGN", 
    "expr"
  ],
  "empty" : [""],
  "expr" : [
    "term", 
    {"*": [{"|": ["PLUS", "MINUS"]}, "term"]}
  ],
  "term" : [
    "factor", 
    {"*": [{"|": ["MUL", "INTEGER_DIV", "FLOAT_DIV"]}, "factor"]}
  ],
  "factor" : {"|": ["variable", 
    "INTEGER_CONST",
    "REAL_CONST",
    ["LPAREN", "expr", "RPAREN"]
   ]},
  "variable": "ID",
  "varleft": "ID",
  "for_loop": ["FOR", "assignment_statement", "TO", "expr","DO","compound_statement"],

  "TOKENS":
  {
    "ID": "ID",
    "INTEGER_CONST": "INTEGER_CONST",
    "REAL_CONST": "REAL_CONST",
    "PLUS": "+",
    "MINUS": "-",
    "MUL": "*",
    "FLOAT_DIV": "/",
    "LPAREN": "(",
    "RPAREN": ")",
    "SEMI": ";",
    "DOT": ".",
    "COLON": ":",
    "COMMA": ",",
    
    "ASSIGN": ":=",
    
    "PROGRAM": "PROGRAM",
    "INTEGER": "INTEGER",
    "REAL": "REAL",
    "INTEGER_DIV": "DIV",
    "VAR": "VAR",
    "PROCEDURE": "PROCEDURE",
    "BEGIN": "BEGIN",
    "END": "END",
    "FOR": "FOR",
    "TO": "TO",
    "DO": "DO"
  },

  "SEMANTICS":
  {
    "program": {"id":0, "name":"ID", "block": "block"},
    "procedure_declaration": {"id":1, "name":"ID", "formals": "formal_parameter_list", "block": "block"},
    "proccall_statement": {"id":2, "name":"ID", "actuals": "actual_parameter_list"},
    "variable_declaration": {"id":3, "name":"ID", "type": "type_spec"},
    "assignment_statement": {"id":4, "name":"varleft", "value":"expr"},
    "formal_parameters": {"id":5, "name":"ID", "type": "type_spec"},
    "variable": {"id":6, "name":"ID"},
    "for_loop": {"id":7, "from":"assignment_statement", "condition":"expr", "block":"compound_statement"},
    "expr": {"id":9},
    "term": {"id":10}
  },
 
  "EXTERNALS":
  {
    "printf": {"args": "__VA_ARGS__"}
  }
   
}
